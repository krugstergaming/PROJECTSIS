{% extends 'hod_template/base_template.html' %}

{% block page_title %}
    Add Faculty
{% endblock page_title %}

{% block main_content %}
{% load static %}

<!-- Include Bootstrap CSS (if not already included in base_template.html) -->
<link href="{% static 'bootstrap-4.0.0-dist\css\bootstrap.min.css' %}" rel="stylesheet">

<!-- Custom Styles -->
<style>
    .form-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
    .form-title {
        font-weight: bold;
        background-color: #f8f9fa;
        padding: 10px;
        text-align: center;
        margin-bottom: 20px;
    }
    .form-section {
        margin-top: 20px;
        border-top: 1px solid #ddd;
        padding-top: 20px;
    }
    .form-label {
        font-weight: bold;
    }
</style>

<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <!-- general form elements -->
                <div class="card card-primary">
                    <div class="card-header">
                        <h3 class="card-title">Add Faculty</h3>
                    </div>
                    <!-- /.card-header -->
                    <!-- form start -->
                    <form role="form" method="POST" action="{% url 'add_staff_save' %}">
                        {% csrf_token %}

                        <!-- Display Messages -->
                        {% if messages %}
                        <div class="container">
                            {% for message in messages %}
                            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert" style="margin-top: 10px;">
                                {{ message }}
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}

                        <!-- Form Container -->
                        <div class="form-container">
                            <div class="form-title">I. PERSONAL INFORMATION</div>

                            <!-- Surname, First Name, Middle Name -->
                            <div class="form-group row">
                                <label for="surname" class="col-sm-3 col-form-label form-label">Last Name</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="surname" name="surname" placeholder="Enter your last name">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="first_name" class="col-sm-3 col-form-label form-label">First Name</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="first_name" name="first_name" placeholder="Enter your first name">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="middle_name" class="col-sm-3 col-form-label form-label">Middle Name</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="middle_name" name="middle_name" placeholder="Enter your middle name">
                                </div>
                            </div>

                            <!-- Date of Birth -->
                            <div class="form-group row">
                                <label for="dob" class="col-sm-3 col-form-label form-label">Date of Birth</label>
                                <div class="col-sm-9">
                                    <input type="date" class="form-control" id="dob" name="dob" placeholder="Select your date of birth" onchange="calculateAge()">
                                </div>
                            </div>

                            <!-- Age -->
                            <div class="form-group row">
                                <label for="age" class="col-sm-3 col-form-label form-label">Age</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="age" name="age" placeholder="Age will be calculated automatically" readonly>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="pob" class="col-sm-3 col-form-label form-label">Place of Birth</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="pob" name="pob" placeholder="Enter your place of birth">
                                </div>
                            </div>

                            <!-- Sex -->
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label form-label">Sex</label>
                                <div class="col-sm-9">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="male" name="sex">
                                        <label class="form-check-label" for="male">Male</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="female" name="sex">
                                        <label class="form-check-label" for="female">Female</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Civil Status -->
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label form-label">Civil Status</label>
                                <div class="col-sm-9">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="single" name="civil_status">
                                        <label class="form-check-label" for="single">Single</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="married" name="civil_status">
                                        <label class="form-check-label" for="married">Married</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="other" name="civil_status">
                                        <label class="form-check-label" for="other">Other</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Height, Weight, Blood Type -->
                            <div class="form-group row">
                                <label for="height" class="col-sm-3 col-form-label form-label">Height (m)</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="height" name="height" placeholder="Enter your height in meters">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="weight" class="col-sm-3 col-form-label form-label">Weight (kg)</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="weight" name="weight" placeholder="Enter your weight in kilograms">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="blood_type" class="col-sm-3 col-form-label form-label">Blood Type</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="blood_type" name="blood_type" placeholder="Enter your blood type">
                                </div>
                            </div>

                            <!-- GSIS, PAG-IBIG, PHILHEALTH, SSS -->
                            <div class="form-group row">
                                <label for="gsis_id" class="col-sm-3 col-form-label form-label">GSIS ID No.</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="gsis_id" name="gsis_id" placeholder="Enter your GSIS ID number">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="pagibig_id" class="col-sm-3 col-form-label form-label">PAG-IBIG ID No.</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="pagibig_id" name="pagibig_id" placeholder="Enter your PAG-IBIG ID number">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="philhealth_id" class="col-sm-3 col-form-label form-label">PHILHEALTH No.</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="philhealth_id" name="philhealth_id" placeholder="Enter your PHILHEALTH number">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="sss_id" class="col-sm-3 col-form-label form-label">SSS No.</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="sss_id" name="sss_id" placeholder="Enter your SSS number">
                                </div>
                            </div>

                            <div class="form-group row"></div>
                                <label for="sss_id" class="col-sm-3 col-form-label form-label">TIN No.</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="sss_id" name="tin_id" placeholder="Enter your TIN number">
                                </div>
                            </div>

                            <!-- Citizenship -->
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label form-label">Citizenship</label>
                                <div class="col-sm-9">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="filipino" name="citizenship">
                                        <label class="form-check-label" for="filipino">Filipino</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="dual" name="citizenship">
                                        <label class="form-check-label" for="dual">Dual Citizenship</label>
                                    </div>
                                    <div class="form-check" id="dual_country_container" style="display: none;">
                                        <input class="form-control" type="text" id="dual_country" name="dual_country" placeholder="If dual, specify country">
                                    </div>
                                </div>
                            </div>

                            <!-- Permanent Address -->
                            <div class="form-group row">
                                <label for="permanent_address" class="col-sm-3 col-form-label form-label">Permanent Address</label>
                                <div class="col-sm-9">
                                    <textarea class="form-control" id="permanent_address" name="permanent_address" rows="3" placeholder="Enter your permanent address"></textarea>
                                </div>
                            </div>

                            <!-- Contact Numbers -->
                            <div class="form-group row">
                                <label for="telephone_no" class="col-sm-3 col-form-label form-label">Telephone No.</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="telephone_no" name="telephone_no" placeholder="Enter your telephone number">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="cellphone_no" class="col-sm-3 col-form-label form-label">Cellphone No.</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="cellphone_no" name="cellphone_no" placeholder="Enter your cellphone number">
                                </div>
                            </div>

                            <!-- Email Address -->
                            <div class="form-group row">
                                <label for="email_address" class="col-sm-3 col-form-label form-label">Email Address</label>
                                <div class="col-sm-9">
                                    <input type="email" class="form-control" id="email_address" name="email_address" placeholder="Enter your email address">
                                </div>
                            </div>

                            <!-- Save Button -->
                            <div class="form-group row">
                                <div class="col-sm-12 text-center">
                                    <button type="submit" class="btn btn-primary">Save</button>
                                    <a href="{% url 'add_staff' %}" class="btn btn-secondary">Cancel</a>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Include Bootstrap JS (if not already included in base_template.html) -->
<script src="{% static 'bootstrap-4.0.0-dist\js\bootstrap.bundle.min.js' %}"></script> 

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var dualCitizenRadio = document.getElementById('dual');
        var dualCountryContainer = document.getElementById('dual_country_container');

        // Function to handle showing or hiding the text field
        function toggleDualCountryContainer() {
            if (dualCitizenRadio.checked) {
                dualCountryContainer.style.display = 'block';
            } else {
                dualCountryContainer.style.display = 'none';
            }
        }

        // Add event listeners to handle changes
        var radios = document.querySelectorAll('input[name="citizenship"]');
        radios.forEach(function(radio) {
            radio.addEventListener('change', toggleDualCountryContainer);
        });

        // Initial check in case the page is loaded with Dual Citizenship selected
        toggleDualCountryContainer();
    });

    function calculateAge() {
        const dobInput = document.getElementById('dob').value;
        if (dobInput) {
            const dob = new Date(dobInput);
            const today = new Date();
            let age = today.getFullYear() - dob.getFullYear();
            const monthDiff = today.getMonth() - dob.getMonth();
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
                age--;
            }
            document.getElementById('age').value = age;
        } else {
            document.getElementById('age').value = '';
        }
    }
</script>


{% endblock %}
