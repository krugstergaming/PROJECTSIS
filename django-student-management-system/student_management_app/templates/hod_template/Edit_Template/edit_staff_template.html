{% extends 'hod_template/base_template.html' %}

{% block page_title %}
    Edit Faculty
{% endblock page_title %}

{% block main_content %}

{% load static %}

<!-- Include Bootstrap CSS (if not already included in base_template.html) -->
<link href="{% static 'bootstrap-4.0.0-dist\css\bootstrap.min.css' %}" rel="stylesheet">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Custom Styles -->
<style>
    .form-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
    .form-section {
        margin-top: 20px;
        border-top: 1px solid #ddd;
        padding-top: 20px;
    }
    .form-label {
        font-weight: bold;
    }

    .form-title {
        font-size: 25px; /* Adjust size as needed */
        font-weight: bold;
        color: #333; /* Change color as needed */
        margin-bottom: 20px; /* Spacing below the title */
        margin-left: 0; /* Aligns to the left */
    }
    .form-header {
        font-size: 15px;
        font-weight: bold;
    }

    .form-check-input {
        background-color: #f0f0f0; /* Light gray background */
        border-color: #d1d1d1;    /* Optional: Light gray border */
        width: 20px;              /* Adjust size */
        height: 20px;             /* Adjust size */
    }

    .form-check-input:checked {
        background-color: #00a018; /* Darker gray when selected */
        border-color: #8c8c8c;     /* Darker border when selected */
    }
</style>

<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <!-- general form elements -->
                <div class="card card-warning">
                    <div class="card-header">
                    </div>
                    <!-- /.card-header -->
                    <!-- form start -->
                    <form role="form" method="POST" action="{% url 'edit_staff_save' staff.id %}">
                        {% csrf_token %}
                        {% comment %} Display Messages {% endcomment %}
                                {% if messages %}
                                    <div class="form-group">
                                        <div class="col-12">
                                            {% for message in messages %}
                                                {% if message.tags == "error" %}
                                                    <div class="alert alert-danger alert-dismissible fade show" role="alert" style="margin-top: 10px;">
                                                    {{ message }}
                                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                    </div>
                                                {% elif message.tags == "success" %}
                                                    <div class="alert alert-success alert-dismissible fade show" role="alert" style="margin-top: 10px;">
                                                    {{ message }}
                                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                    </div>
                                                {% endif %}
                                            {% endfor %}
                                        </div>
                                    </div>
                                {% endif %}
                        <!-- Form Container -->
                        <div class="card-body">
                            <div class="form-title">I. EMPLOYMENT INFORMATION</div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="employee_number">Employee Number <span style="color: red;">*</span></label>
                                            <input type="text" class="form-control" id="employee_number" name="employee_number" 
                                            value="{{ staffEmploymentInfo.employee_number }}" placeholder="Enter here">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="employee_type">Employee Type <span style="color: red;">*</span></label>
                                            <select class="form-control" id="employee_type" name="employee_type">
                                                <option value="">Select Employee Type</option>
                                                <option value="Full-Time" {% if staffEmploymentInfo.employee_type == "Full-Time" %}selected{% endif %}>Full-Time</option>
                                                <option value="Part-Time" {% if staffEmploymentInfo.employee_type == "Part-Time" %}selected{% endif %}>Part-Time</option>
                                                <option value="Temporary/Contract" {% if staffEmploymentInfo.employee_type == "Temporary/Contract" %}selected{% endif %}>Temporary/Contract</option>
                                                <option value="Casual" {% if staffEmploymentInfo.employee_type == "Casual" %}selected{% endif %}>Casual</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-5">
                                        <div class="form-group">
                                            <label for="position">Position <span style="color: red;">*</span></label>
                                            <input type="text" class="form-control" id="position" name="position" 
                                            value="{{ staffEmploymentInfo.position }}" placeholder="Enter here">
                                        </div>
                                        
                                    </div>
                                    <div class="col-md-5">
                                        <div class="form-group">
                                            <label for="employment_status">Employment Status <span style="color: red;">*</span></label>
                                            <select class="form-control" id="employment_status" name="employment_status">
                                                <option value="">Select Status</option>
                                                <option value="Active" {% if staffEmploymentInfo.employment_status == "Active" %}selected{% endif %}>Active</option>
                                                <option value="Inactive" {% if staffEmploymentInfo.employment_status == "Inactive" %}selected{% endif %}>Inactive</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="max_laod" >Max Load</label>
                                            <input type="number" class="form-control" id="max_load" name="max_load" 
                                            value="{{ staff.max_load }}" placeholder="Enter your Max Load">
                                        </div>
                                    </div>
                                </div>
                            
                            <div class="form-title">II. PERSONAL INFORMATION</div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="username">Username <span style="color: red;">*</span></label>
                                            <input type="text" class="form-control" id="username" name="username" 
                                            value="{{ username }}" placeholder="Enter your Username">
                                            <span class="username_error"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="email">Email Address <span style="color: red;">*</span></label>
                                            <input type="email" class="form-control" id="email" name="email" 
                                            value="{{ email }}" placeholder="Enter your email address">
                                            <span class="email_error"></span>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="last_name">Last Name <span style="color: red;">*</span></label>
                                            <input type="text" class="form-control" id="last_name" name="last_name" 
                                            value="{{ last_name }}" placeholder="Enter your last name">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="first_name">First Name <span style="color: red;">*</span></label>
                                            <input type="text" class="form-control" id="first_name" name="first_name" 
                                            value="{{ first_name }}" placeholder="Enter your first name">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="middle_name">Middle Name</label>
                                            <input type="text" class="form-control" id="middle_name" name="middle_name" 
                                            value="{{ staff.middle_name }}" placeholder="Enter your middle name">
                                        </div>
                                    </div>
                                    <div class="col-md-1">
                                        <div class="form-group">
                                            <label for="suffix">Suffix</label>
                                            <input type="text" class="form-control" id="suffix" name="suffix" 
                                            value="{{ staff.suffix }}" placeholder="Jr./Sr.">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="dob">Date of Birth <span style="color: red;">*</span></label>
                                            <input type="date" class="form-control" id="dob" name="dob" 
                                            value="{{ staff.dob|date:'Y-m-d' }}" placeholder="Select your date of birth" onchange="calculateAge()">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="age">Age</label>
                                            <input type="text" class="form-control" id="age" name="age" 
                                            value="{{ staff.age }}" placeholder="Age will be calculated automatically" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="pob">Place of Birth <span style="color: red;">*</span></label>
                                            <input type="text" class="form-control" id="pob" name="pob" 
                                            value="{{ staff.pob }}" placeholder="Enter your place of birth">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group d-flex align-items-center">
                                            <label class="form-label" style="margin-right: 10px; min-width: 80px;">Sex: <span style="color: red;">*</span></label>
                                            <div class="d-flex" style="gap: 15px;">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="male" name="sex" value="Male" 
                                                    {% if staff.sex == "Male" %}checked{% endif %}>
                                                    <label class="form-check-label" for="male">Male</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="female" name="sex" value="Female" 
                                                    {% if staff.sex == "Female" %}checked{% endif %}>
                                                    <label class="form-check-label" for="female">Female</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group d-flex align-items-center">
                                            <label class="form-label" style="margin-right: 10px; min-width: 80px;">Civil Status: <span style="color: red;">*</span></label>
                                            <div class="d-flex" style="gap: 15px;">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="single" name="civil_status" value="Single" 
                                                    {% if staff.civil_status == "Single" %}checked{% endif %}>
                                                    <label class="form-check-label" for="single">Single</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="married" name="civil_status" value="Married" 
                                                    {% if staff.civil_status == "Married" %}checked{% endif %}>
                                                    <label class="form-check-label" for="married">Married</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="other" name="civil_status" value="Other" 
                                                    {% if staff.civil_status == "Other" %}checked{% endif %}>
                                                    <label class="form-check-label" for="other">Other</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="form-label" style="margin-bottom: 10px;">Citizenship: <span style="color: red;">*</span></label>
                                            <div class="d-flex align-items-center" style="gap: 15px;">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="filipino" name="citizenship" value="Filipino" 
                                                    {% if staff.citizenship == "Filipino" %}checked{% endif %} onchange="toggleDualCountry(false)">
                                                    <label class="form-check-label" for="filipino">Filipino</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="dual" name="citizenship" value="Dual" 
                                                    {% if staff.citizenship == "Dual" %}checked{% endif %} onchange="toggleDualCountry(true)">
                                                    <label class="form-check-label" for="dual">Dual Citizenship</label>
                                                </div>
                                            </div>
                                            <div class="mt-2" id="dual_country_container" style="{% if staff.citizenship != 'Dual' %}display: none;{% endif %}">
                                                <input class="form-control" type="text" id="dual_country" name="dual_country" 
                                                value="{{ staff.dual_country }}" placeholder="If dual, specify country">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            <div class="form-title">III. CONTACT INFORMATION</div>
                            
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="telephone_no">Telephone No.</label>
                                            <input type="text" class="form-control" id="telephone_no" name="telephone_no" 
                                            value="{{ staffContactInfo.telephone_no }}" placeholder="Enter your telephone number">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="cellphone_no">Cellphone No.</label>
                                            <input type="text" class="form-control" id="cellphone_no" name="cellphone_no" 
                                            value="{{ staffContactInfo.cellphone_no }}" placeholder="Enter your cellphone number">
                                        </div>
                                    </div>
                                </div>
                            
                                <div class="form-header">Address:</div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="region">Region <span style="color: red;">*</span></label>
                                            <select name="region" class="form-control form-control-md" id="region"></select>
                                            <input type="hidden" class="form-control form-control-md" name="region-text" id="region-text">
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="province">Province <span style="color: red;">*</span></label>
                                            <select name="province" class="form-control form-control-md" id="province"></select>
                                            <input type="hidden" class="form-control form-control-md" name="province-text" id="province-text">
                                        </div>
                                    </div>
                                </div>
                            
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="city">City <span style="color: red;">*</span></label>
                                            <select name="city" class="form-control form-control-md" id="city"></select>
                                            <input type="hidden" class="form-control form-control-md" name="city-text" id="city-text">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="barangay">Barangay <span style="color: red;">*</span></label>
                                            <select name="barangay" class="form-control form-control-md" id="barangay"></select>
                                            <input type="hidden" class="form-control form-control-md" name="barangay-text" id="barangay-text">
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="street">Street <span style="color: red;">*</span></label>
                                            <input type="text" class="form-control form-control-md" id="street" name="street" 
                                            value="{{ staffContactInfo.street }}" placeholder="Enter your Street">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="emergency_contact">Emergency Contact Name <span style="color: red;">*</span></label>
                                            <input type="text" class="form-control" id="emergency_contact_name" name="emergency_contact_name" 
                                            value="{{ staffContactInfo.emergency_contact_name }}" placeholder="Enter your Emergency Contact Name">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="emergency_contact">Emergency Contact Number <span style="color: red;">*</span></label>
                                            <input type="text" class="form-control" id="emergency_contact_no" name="emergency_contact_no" 
                                            value="{{ staffContactInfo.emergency_contact_no }}" placeholder="Enter your Emergency Contact number">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="emergency_relationship">Emergency Contact Relationship <span style="color: red;">*</span></label>
                                            <input type="text" class="form-control" id="emergency_relationship" name="emergency_relationship" 
                                            value="{{ staffContactInfo.emergency_relationship }}" placeholder="Enter your Emergency Contact Relationship">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="medical_condition">Medical Condition</label>
                                            <input type="text" class="form-control" id="medical_condition" name="medical_condition" 
                                            value="{{ staffContactInfo.medical_condition }}" placeholder="Enter your Medical Contidion (optional)">
                                        </div>
                                    </div>
                                </div>
                            
                            <div class="form-title">IV. PHYSICAL INFORMATION</div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="height">Height (ft)</label>
                                            <input type="text" class="form-control" id="height" name="height" 
                                            value="{{ staffPhysicalInfo.height }}" placeholder="Enter your height in feet">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="weight">Weight (kg)</label>
                                            <input type="text" class="form-control" id="weight" name="weight" 
                                            value="{{ staffPhysicalInfo.weight }}" placeholder="Enter your weight in kilograms">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="blood_type">Blood Type</label>
                                            <select class="form-control" id="blood_type" name="blood_type">
                                                <option value="">Select your blood type</option>
                                                <option value="N/A" {% if blood_type == 'N/A' %}selected{% endif %}>N/A</option>
                                                <option value="A+" {% if blood_type == 'A+' %}selected{% endif %}>A+</option>
                                                <option value="A-" {% if blood_type == 'A-' %}selected{% endif %}>A-</option>
                                                <option value="B+" {% if blood_type == 'B+' %}selected{% endif %}>B+</option>
                                                <option value="B-" {% if blood_type == 'B-' %}selected{% endif %}>B-</option>
                                                <option value="AB+" {% if blood_type == 'AB+' %}selected{% endif %}>AB+</option>
                                                <option value="AB-" {% if blood_type == 'AB-' %}selected{% endif %}>AB-</option>
                                                <option value="O+" {% if blood_type == 'O+' %}selected{% endif %}>O+</option>
                                                <option value="O-" {% if blood_type == 'O-' %}selected{% endif %}>O-</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="eye_color">Eye Color</label>
                                            <select class="form-control" id="eye_color" name="eye_color" required>
                                                <option value="">Select Eye Color</option>
                                                <option value="Black" {% if staffPhysicalInfo.eye_color == 'Black' %}selected{% endif %}>Black</option>
                                                <option value="Brown" {% if staffPhysicalInfo.eye_color == 'Brown' %}selected{% endif %}>Brown</option>
                                                <option value="Blue" {% if staffPhysicalInfo.eye_color == 'Blue' %}selected{% endif %}>Blue</option>
                                                <option value="Green" {% if staffPhysicalInfo.eye_color == 'Green' %}selected{% endif %}>Green</option>
                                                <option value="Hazel" {% if staffPhysicalInfo.eye_color == 'Hazel' %}selected{% endif %}>Hazel</option>
                                                <option value="Gray" {% if staffPhysicalInfo.eye_color == 'Gray' %}selected{% endif %}>Gray</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="hair_color">Hair Color</label>
                                            <select class="form-control" id="hair_color" name="hair_color" required>
                                                <option value="">Select Hair Color</option>
                                                <option value="Black" {% if staffPhysicalInfo.hair_color == 'Black' %}selected{% endif %}>Black</option>
                                                <option value="Brown" {% if staffPhysicalInfo.hair_color == 'Brown' %}selected{% endif %}>Brown</option>
                                                <option value="Blonde" {% if staffPhysicalInfo.hair_color == 'Blonde' %}selected{% endif %}>Blonde</option>
                                                <option value="Red" {% if staffPhysicalInfo.hair_color == 'Red' %}selected{% endif %}>Red</option>
                                                <option value="Gray" {% if staffPhysicalInfo.hair_color == 'Gray' %}selected{% endif %}>Gray</option>
                                                <option value="White" {% if staffPhysicalInfo.hair_color == 'White' %}selected{% endif %}>White</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                            <div class="form-title">V. GOVERNMENT ID INFORMATION</div>

                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="gsis_id">GSIS ID No.</label>
                                            <input type="text" class="form-control" id="gsis_id" name="gsis_id" 
                                            value="{{ staffGovernmentId.gsis_id }}" placeholder="Enter your GSIS ID number">
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="pagibig_id">PAG-IBIG ID No.</label>
                                            <input type="text" class="form-control" id="pagibig_id" name="pagibig_id" 
                                            value="{{ staffGovernmentId.pagibig_id }}" placeholder="Enter your PAG-IBIG ID number">
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="philhealth_id">PHILHEALTH No.</label>
                                            <input type="text" class="form-control" id="philhealth_id" name="philhealth_id" 
                                            value="{{ staffGovernmentId.philhealth_id }}" placeholder="Enter your PHILHEALTH number">
                                        </div>
                                    </div>
                                
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="sss_id">SSS No.</label>
                                            <input type="text" class="form-control" id="sss_id" name="sss_id" 
                                            value="{{ staffGovernmentId.sss_id }}" placeholder="Enter your SSS number">
                                        </div>
                                    </div>
                                
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="tin_id">TIN No.</label>
                                            <input type="text" class="form-control" id="tin_id" name="tin_id" 
                                            value="{{ staffGovernmentId.tin_id }}" placeholder="Enter your TIN number">
                                        </div>
                                    </div>
                                </div>

                            <div class="form-title">VI. EDUCATIONAL BACKGROUND INFORMATION</div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="HEA">Highest Educational Attainment</label>
                                            <select class="form-control" id="HEA" name="HEA" required>
                                                <option value="">Select Educational Attainment</option>
                                                <option value="Elementary" {% if staffEducBackground.HEA == 'Elementary' %}selected{% endif %}>Elementary</option>
                                                <option value="High School" {% if staffEducBackground.HEA == 'High School' %}selected{% endif %}>High School</option>
                                                <option value="Vocational" {% if staffEducBackground.HEA == 'Vocational' %}selected{% endif %}>Vocational</option>
                                                <option value="Associate " {% if staffEducBackground.HEA == 'Associate' %}selected{% endif %}>Associate Degree</option>
                                                <option value="Bachelor" {% if staffEducBackground.HEA == 'Bachelor' %}selected{% endif %}>Bachelor's Degree</option>
                                                <option value="Master" {% if staffEducBackground.HEA == 'Master' %}selected{% endif %}>Master's Degree</option>
                                                <option value="Doctorate/PhD" {% if staffEducBackground.HEA == 'Doctorate/PhD' %}selected{% endif %}>Doctorate/PhD</option>
                                            </select>
                                        </div>
                                    </div>
                                
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="preferred_subject">Preferred Subject</label>
                                            <select class="form-control" id="preferred_subject" name="preferred_subject" required>
                                                <option value="">Select Preferred Subject</option>
                                                <option value="Reading" {% if staffEducBackground.preferred_subject == 'Reading' %}selected{% endif %}>Reading</option>
                                                <option value="Language" {% if staffEducBackground.preferred_subject == 'Language' %}selected{% endif %}>Language</option>
                                                <option value="Mathematics" {% if staffEducBackground.preferred_subject == 'Mathematics' %}selected{% endif %}>Mathematics</option>
                                                <option value="Science" {% if staffEducBackground.preferred_subject == 'Science' %}selected{% endif %}>Science</option>
                                                <option value="Filipino" {% if staffEducBackground.preferred_subject == 'Filipino' %}selected{% endif %}>Filipino</option>
                                                <option value="Makabayan" {% if staffEducBackground.preferred_subject == 'Makabayan' %}selected{% endif %}>Makabayan</option>
                                                <option value="Araling panlipunan" {% if staffEducBackground.preferred_subject == 'Araling panlipunan' %}selected{% endif %}>Araling panlipunan</option>
                                                <option value="Edukasyon sa pagpapakatao" {% if staffEducBackground.preferred_subject == 'Edukasyon sa pagpapakatao' %}selected{% endif %}>Edukasyon sa pagpapakatao</option>
                                                <option value="Mapeh" {% if staffEducBackground.preferred_subject == 'Mapeh' %}selected{% endif %}>Mapeh</option>
                                                <option value="Hele / epp" {% if staffEducBackground.preferred_subject == 'Hele / epp' %}selected{% endif %}>Hele / epp</option>
                                                <option value="N/A" {% if staffEducBackground.preferred_subject == 'N/A' %}selected{% endif %}>N/A</option>
                                            </select>
                                        </div>
                                    </div>
                                
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="language_spoken">Languages Spoken</label>
                                            <input type="text" class="form-control" id="language_spoken" name="language_spoken" 
                                            value="{{ staffEducBackground.language_spoken }}" placeholder="Enter here">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="Cert_License">Certifications and Licenses</label>
                                            <textarea type="text" class="form-control" id="Cert_License" name="Cert_License" placeholder="Enter here" rows="3">{{ staffEducBackground.Cert_License }}</textarea>
                                        </div>
                                    </div>
                                
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="teaching_exp">Teaching Experience</label>
                                            <textarea class="form-control" id="teaching_exp" name="teaching_exp" placeholder="Enter here" rows="3">{{ staffEducBackground.teaching_exp }}</textarea>
                                        </div>
                                    </div>
                                
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="skills_competencies">Skills and Competencies</label>
                                            <textarea class="form-control" id="skills_competencies" name="skills_competencies" placeholder="Enter here" rows="3">{{ staffEducBackground.skills_competencies }}</textarea>
                                        </div>
                                    </div>
                                </div>
                        </div>
                        <div class="card-footer">
                            <div class="col-sm-12 text-center">
                                <button type="submit" class="btn btn-warning">Update</button>
                                <a href="{% url 'manage_staff' %}" class="btn btn-secondary">Back</a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Include Bootstrap JS (if not already included in base_template.html) -->
<script src="{% static 'bootstrap-4.0.0-dist\js\bootstrap.bundle.min.js' %}"></script> 

<script>
    $(document).ready(function() {
                // Check email availability
                $("#email").on("keyup", function() {
                    var email = $(this).val();
    
                    if (email !== "") {
                        $.ajax({
                            url: '{% url "check_email_exist" %}',
                            type: 'POST',
                            data: { email: email },
                            headers: { 'X-CSRFToken': '{{ csrf_token }}' }, // CSRF token for security
                        })
                        .done(function(response) {
                            $(".email_error").remove(); // Remove previous messages
                            if (response.trim() === "True") {
                                $("<span class='email_error' style='color: red; padding: 5px; font-weight: bold;'> Email Not Available. </span>").insertAfter("#email");
                            } else {
                                $("<span class='email_error' style='color: green; padding: 5px; font-weight: bold;'> Email Available. </span>").insertAfter("#email");
                            }
                        })
                        .fail(function() {
                            console.error("Failed to check email availability.");
                        });
                    } else {
                        $(".email_error").remove(); // Remove message if input is empty
                    }
                });
    
                // Check username availability
                $("#username").on("keyup", function() {
                    var username = $(this).val();
    
                    if (username !== "") {
                        $.ajax({
                            url: '{% url "check_username_exist" %}',
                            type: 'POST',
                            data: { username: username },
                            headers: { 'X-CSRFToken': '{{ csrf_token }}' }, // CSRF token for security
                        })
                        .done(function(response) {
                            $(".username_error").remove(); // Remove previous messages
                            if (response.trim() === "True") {
                                $("<span class='username_error' style='color: red; padding: 5px; font-weight: bold;'> Username Not Available. </span>").insertAfter("#username");
                            } else {
                                $("<span class='username_error' style='color: green; padding: 5px; font-weight: bold;'> Username Available. </span>").insertAfter("#username");
                            }
                        })
                        .fail(function() {
                            console.error("Failed to check username availability.");
                        });
                    } else {
                        $(".username_error").remove(); // Remove message if input is empty
                    }
                });
            });
</script>

<script>
    function updateAddressFields() {
        // Get the selected options and their text content
        var regionSelect = document.getElementById('region');
        var provinceSelect = document.getElementById('province');
        var citySelect = document.getElementById('city');
        var barangaySelect = document.getElementById('barangay');

        // Ensure there's a valid selection and update hidden inputs with the option text
        if (regionSelect.selectedIndex > 0) {
            document.getElementById('region-text').value = regionSelect.options[regionSelect.selectedIndex].text;
        }
        if (provinceSelect.selectedIndex > 0) {
            document.getElementById('province-text').value = provinceSelect.options[provinceSelect.selectedIndex].text;
        }
        if (citySelect.selectedIndex > 0) {
            document.getElementById('city-text').value = citySelect.options[citySelect.selectedIndex].text;
        }
        if (barangaySelect.selectedIndex > 0) {
            document.getElementById('barangay-text').value = barangaySelect.options[barangaySelect.selectedIndex].text;
        }
    }

    // Event listeners to update the hidden fields whenever a selection is made
    document.getElementById('region').addEventListener('change', updateAddressFields);
    document.getElementById('province').addEventListener('change', updateAddressFields);
    document.getElementById('city').addEventListener('change', updateAddressFields);
    document.getElementById('barangay').addEventListener('change', updateAddressFields);

    // Initial call to populate hidden fields when page loads (if pre-populated values exist)
    updateAddressFields();
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var dualCitizenRadio = document.getElementById('dual');
        var dualCountryContainer = document.getElementById('dual_country_container');
        var otherCheckbox = document.getElementById('other');
        var otherLanguageField = document.getElementById('other-language-field');

        // Function to handle showing or hiding the text field
        function toggleDualCountryContainer() {
            if (dualCitizenRadio.checked) {
                dualCountryContainer.style.display = 'block';
            } else {
                dualCountryContainer.style.display = 'none';
            }
        }

        // Add event listeners to handle changes
        var radios = document.querySelectorAll('input[name="citizenship"]');
        radios.forEach(function(radio) {
            radio.addEventListener('change', toggleDualCountryContainer);
        });

        // Initial check in case the page is loaded with Dual Citizenship selected
        toggleDualCountryContainer();


        // Function to toggle the visibility of the text field
        function toggleOtherLanguageField() {
            // Check if the checkbox is checked
            if (otherCheckbox.checked) {
                otherLanguageField.style.display = 'block';  // Show the text field
            } else {
                otherLanguageField.style.display = 'none';   // Hide the text field
            }
        }

        // Add an event listener to the checkbox for "Other" to trigger the function on change
        otherCheckbox.addEventListener('change', toggleOtherLanguageField);

        // Initial check to handle the page state when it first loads
        toggleOtherLanguageField();

    });

    function calculateAge() {
        const dobInput = document.getElementById('dob').value;
        if (dobInput) {
            const dob = new Date(dobInput);
            const today = new Date();
            let age = today.getFullYear() - dob.getFullYear();
            const monthDiff = today.getMonth() - dob.getMonth();
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
                age--;
            }
            document.getElementById('age').value = age;
        } else {
            document.getElementById('age').value = '';
        }
    }
</script>


{% endblock %}
