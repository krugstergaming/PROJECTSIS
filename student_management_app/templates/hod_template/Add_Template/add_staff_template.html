{% extends 'hod_template/base_template.html' %}

{% block page_title %}
    Add Faculty
{% endblock page_title %}

{% block main_content %}
{% load static %}

<!-- Include Bootstrap CSS (if not already included in base_template.html) -->
<link href="{% static 'bootstrap-4.0.0-dist\css\bootstrap.min.css' %}" rel="stylesheet">

<!-- Custom Styles -->
<style>
    .form-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
    .form-section {
        margin-top: 20px;
        border-top: 1px solid #ddd;
        padding-top: 20px;
    }
    .form-label {
        font-weight: bold;
    }

    .form-title {
        font-size: 25px; /* Adjust size as needed */
        font-weight: bold;
        color: #333; /* Change color as needed */
        margin-bottom: 20px; /* Spacing below the title */
        margin-left: 0; /* Aligns to the left */
    }
</style>

<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <!-- general form elements -->
                <div class="card card-primary">
                    <div class="card-header">
                        <h3 class="card-title">Add Faculty</h3>
                    </div>
                    <!-- /.card-header -->
                    <!-- form start -->
                    <form role="form" method="POST" action="{% url 'add_staff_save' %}">
                        {% csrf_token %}
                    
                        <!-- Display Messages -->
                        {% if messages %}
                        <div class="container">
                            {% for message in messages %}
                            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert" style="margin-top: 10px;">
                                {{ message }}
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}
                    
                        <!-- Form Container -->
                        <div class="card-body">
                            
                            <div class="form-title"> PERSONAL INFORMATION</div>

                            <div class="row">
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label for="last_name" >Max Load</label>
                                        <input type="text" class="form-control" id="max_laod" name="max_laod" placeholder="Enter your Max Load">
                                    </div>
                                </div>
    
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label for="last_name">Username</label>
                                        <input type="text" class="form-control" id="username" name="username" placeholder="Enter your Username">
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label for="email_address">Email Address</label>
                                        <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email address">
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="last_name">Last Name</label>
                                        <input type="text" class="form-control" id="last_name" name="last_name" placeholder="Enter your last name">
                                    </div>
                                </div>
                                
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="first_name">First Name</label>
                                        <input type="text" class="form-control" id="first_name" name="first_name" placeholder="Enter your first name">
                                    </div>
                                </div>
                                
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="middle_name">Middle Name</label>
                                        <input type="text" class="form-control" id="middle_name" name="middle_name" placeholder="Enter your middle name">
                                    </div>
                                </div>

                                <div class="col-md-1">
                                    <div class="form-group">
                                        <label for="suffix">Suffix</label>
                                        <input type="text" class="form-control" id="suffix" name="suffix" placeholder="Jr./Sr.">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="dob" >Date of Birth</label>
                                        <input type="date" class="form-control" id="dob" name="dob" placeholder="Select your date of birth" onchange="calculateAge()">
                                    </div>
                                </div>
                        
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="age">Age</label>
                                        <input type="text" class="form-control" id="age" name="age" placeholder="Age will be calculated automatically" readonly>
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="pob">Place of Birth</label>
                                        <input type="text" class="form-control" id="pob" name="pob" placeholder="Enter your place of birth">
                                    </div>
                                </div>
                            </div>

                            <!-- Contact Numbers -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="telephone_no">Telephone No.</label>
                                        <input type="text" class="form-control" id="telephone_no" name="telephone_no" placeholder="Enter your telephone number">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="cellphone_no">Cellphone No.</label>
                                        <input type="text" class="form-control" id="cellphone_no" name="cellphone_no" placeholder="Enter your cellphone number">
                                    </div>
                                </div>
                            </div>
                    
                            <div class="row">
                                <!-- Sex -->
                                <div class="col-md-4">
                                    <div class="form-group d-flex align-items-center">
                                        <label class="form-label" style="margin-right: 10px; min-width: 80px;">Sex:</label>
                                        <div class="d-flex" style="gap: 15px;">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="male" name="sex" value="Male">
                                                <label class="form-check-label" for="male">Male</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="female" name="sex" value="Female">
                                                <label class="form-check-label" for="female">Female</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                                <!-- Civil Status -->
                                <div class="col-md-4">
                                    <div class="form-group d-flex align-items-center">
                                        <label class="form-label" style="margin-right: 10px; min-width: 80px;">Civil Status:</label>
                                        <div class="d-flex" style="gap: 15px;">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="single" name="civil_status" value="Single">
                                                <label class="form-check-label" for="single">Single</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="married" name="civil_status" value="Married">
                                                <label class="form-check-label" for="married">Married</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="other" name="civil_status" value="Other">
                                                <label class="form-check-label" for="other">Other</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            
                                <!-- Citizenship -->
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="form-label" style="margin-bottom: 10px;">Citizenship:</label>
                                        <div class="d-flex align-items-center" style="gap: 15px;">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="filipino" name="citizenship" value="Filipino" onchange="toggleDualCountry(false)">
                                                <label class="form-check-label" for="filipino">Filipino</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="dual" name="citizenship" value="Dual" onchange="toggleDualCountry(true)">
                                                <label class="form-check-label" for="dual">Dual Citizenship</label>
                                            </div>
                                        </div>
                                        <div class="mt-2" id="dual_country_container" style="display: none;">
                                            <input class="form-control" type="text" id="dual_country" name="dual_country" placeholder="If dual, specify country">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="height">Height (m)</label>
                                        <input type="text" class="form-control" id="height" name="height" placeholder="Enter your height in meters">
                                    </div>
                                </div>
                                
                        
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="weight">Weight (kg)</label>
                                        <input type="text" class="form-control" id="weight" name="weight" placeholder="Enter your weight in kilograms">
                                    </div>
                                </div>
                        
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="blood_type">Blood Type</label>
                                        <select class="form-control" id="blood_type" name="blood_type">
                                            <option value="">Select your blood type</option>
                                            <option value="A+">A+</option>
                                            <option value="A-">A-</option>
                                            <option value="B+">B+</option>
                                            <option value="B-">B-</option>
                                            <option value="AB+">AB+</option>
                                            <option value="AB-">AB-</option>
                                            <option value="O+">O+</option>
                                            <option value="O-">O-</option>
                                        </select>
                                    </div>
                                </div>

                            </div>
                    
                            <div class="row">
                                <!-- GSIS, PAG-IBIG, PHILHEALTH, SSS -->
                                
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="gsis_id">GSIS ID No.</label>
                                        <input type="text" class="form-control" id="gsis_id" name="gsis_id" placeholder="Enter your GSIS ID number">
                                    </div>
                                </div>
                                
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="pagibig_id">PAG-IBIG ID No.</label>
                                        <input type="text" class="form-control" id="pagibig_id" name="pagibig_id" placeholder="Enter your PAG-IBIG ID number">
                                    </div>
                                </div>
                                
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label for="philhealth_id">PHILHEALTH No.</label>
                                        <input type="text" class="form-control" id="philhealth_id" name="philhealth_id" placeholder="Enter your PHILHEALTH number">
                                    </div>
                                </div>

                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label for="sss_id">SSS No.</label>
                                        <input type="text" class="form-control" id="sss_id" name="sss_id" placeholder="Enter your SSS number">
                                    </div>
                                </div>

                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label for="tin_id">TIN No.</label>
                                        <input type="text" class="form-control" id="tin_id" name="tin_id" placeholder="Enter your TIN number">
                                    </div>
                                </div>
                            </div>

                            <!-- Permanent Address -->

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="region">Region</label>
                                        <select name="region" class="form-control form-control-md" id="region"></select>
                                        <input type="hidden" class="form-control form-control-md" name="region_text" id="region-text" required>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="province">Province</label>
                                        <select name="province" class="form-control form-control-md" id="province"></select>
                                        <input type="hidden" class="form-control form-control-md" name="province_text" id="province-text" required>
                                    </div>    
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="city">City</label>
                                            <select name="city" class="form-control form-control-md" id="city"></select>
                                            <input type="hidden" class="form-control form-control-md" name="city_text" id="city-text" required>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="barangay">Barangay</label>
                                        <select name="barangay" class="form-control form-control-md" id="barangay"></select>
                                        <input type="hidden" class="form-control form-control-md" name="barangay_text" id="barangay-text" required>
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="street">Street</label>
                                        <input type="text" class="form-control form-control-md" name="street_text" id="street-text">
                                    </div>
                                </div>
                            </div>
                            
                            <input type="hidden" name="permanent_address" id="permanent_address" required>
                    
                            
                            <!-- Save Button -->
                            <div class="form-group row">
                                <div class="col-sm-12 text-center">
                                    <button type="submit" class="btn btn-primary">Save</button>
                                    <a href="{% url 'add_staff' %}" class="btn btn-secondary">Cancel</a>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Include Bootstrap JS (if not already included in base_template.html) -->
<script src="{% static 'bootstrap-4.0.0-dist\js\bootstrap.bundle.min.js' %}"></script> 
<script src="{% static 'ph-json/ph-address-selector.js' %}"></script>

<script>
    function concatenateAddress() {
        // Get the values of the input fields
        var region = document.getElementById('region-text').value;
        var province = document.getElementById('province-text').value;
        var city = document.getElementById('city-text').value;
        var barangay = document.getElementById('barangay-text').value;
        var street = document.getElementById('street-text').value;

        // Concatenate the values
        var fullAddress = street + ", " + barangay + ", " + city + ", " + province + ", " + region;

        // Set the concatenated address to the hidden input
        document.getElementById('permanent_address').value = fullAddress;
    }

    // Call the function initially (in case values are already set)
    concatenateAddress();

    // Add event listeners to update the address when any input changes
    document.getElementById('region-text').addEventListener('input', concatenateAddress);
    document.getElementById('province-text').addEventListener('input', concatenateAddress);
    document.getElementById('city-text').addEventListener('input', concatenateAddress);
    document.getElementById('barangay-text').addEventListener('input', concatenateAddress);
    document.getElementById('street-text').addEventListener('input', concatenateAddress);
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var dualCitizenRadio = document.getElementById('dual');
        var dualCountryContainer = document.getElementById('dual_country_container');

        // Function to handle showing or hiding the text field
        function toggleDualCountryContainer() {
            if (dualCitizenRadio.checked) {
                dualCountryContainer.style.display = 'block';
            } else {
                dualCountryContainer.style.display = 'none';
            }
        }

        // Add event listeners to handle changes
        var radios = document.querySelectorAll('input[name="citizenship"]');
        radios.forEach(function(radio) {
            radio.addEventListener('change', toggleDualCountryContainer);
        });

        // Initial check in case the page is loaded with Dual Citizenship selected
        toggleDualCountryContainer();
    });

    function calculateAge() {
        const dobInput = document.getElementById('dob').value;
        if (dobInput) {
            const dob = new Date(dobInput);
            const today = new Date();
            let age = today.getFullYear() - dob.getFullYear();
            const monthDiff = today.getMonth() - dob.getMonth();
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
                age--;
            }
            document.getElementById('age').value = age;
        } else {
            document.getElementById('age').value = '';
        }
    }
</script>


{% endblock %}